MODBUS 2018 - NODE-RED IMPLEMENTATION (JSON SOURCE)

[{"id":"6c0f56b5.9a7dd8","type":"tab","label":"Flow 1"},{"id":"68ca6a7f.edef64","type":"inject","z":"6c0f56b5.9a7dd8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"x":233.01734924316406,"y":98.01041412353516,"wires":[["873abbbb.257dd8"]]},{"id":"873abbbb.257dd8","type":"debug","z":"6c0f56b5.9a7dd8","name":"","active":false,"console":"false","complete":"false","x":481.0173454284668,"y":70.01041221618652,"wires":[]},{"id":"4d8ef9a6.111cb8","type":"modbus-read","z":"6c0f56b5.9a7dd8","name":"","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"100","quantity":"3","rate":"500","rateUnit":"ms","server":"bf0453ea.d83","x":214.01734924316406,"y":187.01041412353516,"wires":[["873abbbb.257dd8"],["55d46279.c77cdc","49812f4f.218b9"]]},{"id":"eb938627.5c6838","type":"ui_gauge","z":"6c0f56b5.9a7dd8","name":"","group":"f55f6547.310548","order":2,"width":0,"height":0,"gtype":"gage","title":"Gauge","label":"units","format":"{{value}}","min":0,"max":"100","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":801.017333984375,"y":34.01042175292969,"wires":[]},{"id":"cc258157.6521d","type":"modbus-write","z":"6c0f56b5.9a7dd8","name":"","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"110","quantity":"1","server":"bf0453ea.d83","x":557.0173149108887,"y":520.0104446411133,"wires":[["4d214ad3.55cd84"],[]]},{"id":"da17120b.6253f","type":"ui_slider","z":"6c0f56b5.9a7dd8","name":"","label":"slider","group":"9cd4f2a4.21751","order":1,"width":0,"height":0,"passthru":true,"topic":"","min":0,"max":"255","step":"5","x":287.01732635498047,"y":440.0104160308838,"wires":[["cc258157.6521d"]]},{"id":"40d81aad.7630a4","type":"ui_button","z":"6c0f56b5.9a7dd8","name":"","group":"9cd4f2a4.21751","order":3,"width":0,"height":0,"label":"OFF","color":"","bgcolor":"red","icon":"","payload":"0","payloadType":"num","topic":"","x":290.01731872558594,"y":518.0104160308838,"wires":[["cc258157.6521d"]]},{"id":"d4c41723.eb7ce8","type":"ui_button","z":"6c0f56b5.9a7dd8","name":"","group":"9cd4f2a4.21751","order":2,"width":0,"height":0,"label":"ON","color":"","bgcolor":"green","icon":"","payload":"255","payloadType":"num","topic":"","x":290.0173215866089,"y":579.0104732513428,"wires":[["cc258157.6521d"]]},{"id":"4d214ad3.55cd84","type":"ui_text","z":"6c0f56b5.9a7dd8","group":"f55f6547.310548","order":1,"width":0,"height":0,"name":"","label":"text","format":"{{msg.payload}}","layout":"row-spread","x":781.0798568725586,"y":510.527795791626,"wires":[]},{"id":"55d46279.c77cdc","type":"function","z":"6c0f56b5.9a7dd8","name":"Split Registers","func":"var x   = [0,0,0];\nvar out = [msg, msg, msg];\n\nfor (i=0; i<3; i++)\n{\nx[i]   = msg.payload.data[i];    \n\n// msg.payload.data !!\n// NIE - msg.payload\n\nout[i] = {payload: x[i]};\n}\n\n\nreturn out;","outputs":"3","noerr":0,"x":576.0764389038086,"y":178.96527862548828,"wires":[["fa6d908d.1969d","eb938627.5c6838"],["1a1ca17.13ec85f","aaa60d5e.57b0a"],["4980b087.31183","cd325140.83107"]]},{"id":"4980b087.31183","type":"debug","z":"6c0f56b5.9a7dd8","name":"","active":false,"console":"false","complete":"false","x":789.0172653198242,"y":257.0104446411133,"wires":[]},{"id":"fa6d908d.1969d","type":"debug","z":"6c0f56b5.9a7dd8","name":"","active":false,"console":"false","complete":"false","x":794.0172576904297,"y":161.01041984558105,"wires":[]},{"id":"1a1ca17.13ec85f","type":"debug","z":"6c0f56b5.9a7dd8","name":"","active":false,"console":"false","complete":"payload","x":793.0173225402832,"y":206.0103874206543,"wires":[]},{"id":"aaa60d5e.57b0a","type":"ui_gauge","z":"6c0f56b5.9a7dd8","name":"","group":"f55f6547.310548","order":3,"width":0,"height":0,"gtype":"gage","title":"Gauge 2","label":"units","format":"{{value}}","min":0,"max":"100","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":951.0173416137695,"y":190.0104274749756,"wires":[]},{"id":"cd325140.83107","type":"ui_gauge","z":"6c0f56b5.9a7dd8","name":"","group":"f55f6547.310548","order":4,"width":0,"height":0,"gtype":"gage","title":"Gauge 3","label":"units","format":"{{value}}","min":0,"max":"100","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":758.0173416137695,"y":369.01041889190674,"wires":[]},{"id":"270397bd.c870a8","type":"modbus-write","z":"6c0f56b5.9a7dd8","name":"","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"104","quantity":"1","server":"bf0453ea.d83","x":296.01733016967773,"y":743.2328424453735,"wires":[[],[]]},{"id":"b28e5afc.c31ca8","type":"ui_numeric","z":"6c0f56b5.9a7dd8","name":"","label":"numeric","group":"f55f6547.310548","order":0,"width":0,"height":0,"passthru":true,"topic":"","format":"{{value}}","min":0,"max":10,"step":1,"x":98.0833511352539,"y":744.2605266571045,"wires":[["270397bd.c870a8"]]},{"id":"1f3d3644.066c5a","type":"ui_toast","z":"6c0f56b5.9a7dd8","position":"dialog","displayTime":"3","highlight":"","outputs":1,"ok":"OK","cancel":"Cancel","topic":"","name":"","x":695.0798797607422,"y":634.0591444969177,"wires":[["e47aac74.742a"]]},{"id":"2d33f05b.529fd","type":"function","z":"6c0f56b5.9a7dd8","name":"Popup","func":"var out = msg;\n\n\nif (msg.payload == 0) \n    out = {payload: \"Buzzer OFF ?\"};\n    else\n     out = {payload: \"Buzzer is ON ?\"};\n\n\nreturn out;","outputs":"1","noerr":0,"x":469.01734161376953,"y":609.3437309265137,"wires":[["1f3d3644.066c5a"]]},{"id":"9c492902.9771a8","type":"debug","z":"6c0f56b5.9a7dd8","name":"","active":true,"console":"false","complete":"false","x":884.0173110961914,"y":556.2326774597168,"wires":[]},{"id":"4bf32f2d.d0181","type":"ui_button","z":"6c0f56b5.9a7dd8","name":"","group":"9cd4f2a4.21751","order":4,"width":0,"height":0,"label":"ON","color":"","bgcolor":"","icon":"","payload":"255","payloadType":"num","topic":"","x":728.017333984375,"y":763.232666015625,"wires":[["2d33f05b.529fd"]]},{"id":"954b881c.be2b98","type":"ui_button","z":"6c0f56b5.9a7dd8","name":"","group":"9cd4f2a4.21751","order":5,"width":0,"height":0,"label":"OFF","color":"","bgcolor":"","icon":"","payload":"0","payloadType":"num","topic":"","x":726.0173187255859,"y":720.232654094696,"wires":[["2d33f05b.529fd"]]},{"id":"e47aac74.742a","type":"function","z":"6c0f56b5.9a7dd8","name":"Confirm","func":"var out = msg;\n\n\nif (msg.payload == \"OK\") \n    out = {payload: 255};\n    else\n    out = {payload: 0};\n\n\nreturn out;","outputs":"1","noerr":0,"x":885.017333984375,"y":667.232666015625,"wires":[["cc258157.6521d","9c492902.9771a8"]]},{"id":"49812f4f.218b9","type":"debug","z":"6c0f56b5.9a7dd8","name":"","active":false,"console":"false","complete":"false","x":485.0173645019531,"y":279.0104064941406,"wires":[]},{"id":"bf0453ea.d83","type":"modbus-client","z":"","name":"Lolin","clienttype":"tcp","bufferCommands":true,"stateLogEnabled":false,"tcpHost":"192.168.1.50","tcpPort":"502","tcpType":"DEFAULT","serialPort":"/dev/ttyUSB","serialType":"RTU-BUFFERD","serialBaudrate":"9600","serialDatabits":"8","serialStopbits":"1","serialParity":"none","serialConnectionDelay":"100","unit_id":1,"commandDelay":1,"clientTimeout":1000,"reconnectTimeout":2000},{"id":"f55f6547.310548","type":"ui_group","z":"","name":"AnalogRead","tab":"b958d622.612448","disp":true,"width":"6"},{"id":"9cd4f2a4.21751","type":"ui_group","z":"","name":"BUZZER","tab":"b958d622.612448","disp":true,"width":"6"},{"id":"b958d622.612448","type":"ui_tab","z":"","name":"Home","icon":"dashboard","order":1}]
