MODBUS RTU

[{"id":"8e0801f1.b7727","type":"debug","z":"6c0f56b5.9a7dd8","name":"","active":true,"console":"false","complete":"false","x":540,"y":146,"wires":[]},{"id":"d4a0e864.bcc128","type":"modbus-read","z":"6c0f56b5.9a7dd8","name":"","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"0","quantity":"5","rate":"2","rateUnit":"s","server":"d27969e9.977468","x":240,"y":210,"wires":[["3da08c74.38a774","d35f287.58674d8","8e0801f1.b7727"],[]]},{"id":"8e4e5259.2e659","type":"ui_gauge","z":"6c0f56b5.9a7dd8","name":"","group":"4107e475.fe4cac","order":0,"width":0,"height":0,"gtype":"gage","title":"Gauge","label":"units","format":"{{value}}","min":0,"max":"100","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":703,"y":292,"wires":[]},{"id":"3da08c74.38a774","type":"function","z":"6c0f56b5.9a7dd8","name":"","func":"var msg_o = [0,0,0,0];\n\nmsg_o[0] = { payload: msg.payload[0] };\nmsg_o[1] = { payload: msg.payload[1] };\nmsg_o[2] = { payload: msg.payload[2] };\nmsg_o[3] = { payload: msg.payload[3] };\n\nreturn msg_o;","outputs":"4","noerr":0,"x":507,"y":277,"wires":[[],[],[],["8e4e5259.2e659"]]},{"id":"d35f287.58674d8","type":"ui_text","z":"6c0f56b5.9a7dd8","group":"4107e475.fe4cac","order":0,"width":0,"height":0,"name":"","label":"text","format":"{{msg.payload}}","layout":"col-center","x":512,"y":219,"wires":[]},{"id":"5b584e21.e108","type":"modbus-write","z":"6c0f56b5.9a7dd8","name":"","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"MHoldingRegisters","adr":"1","quantity":"1","server":"d27969e9.977468","x":789,"y":486,"wires":[[],[]]},{"id":"14a11902.1cb5b7","type":"function","z":"6c0f56b5.9a7dd8","name":"","func":"if (msg.payload > 255) {\n    msg.payload = 255;\n}\n\nmsg.payload = [msg.payload];\n\nreturn msg;\n\n","outputs":"1","noerr":0,"x":502,"y":431,"wires":[["5b584e21.e108"]]},{"id":"f93b83bf.1d75b","type":"modbus-write","z":"6c0f56b5.9a7dd8","name":"","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"MHoldingRegisters","adr":"4","quantity":"1","server":"d27969e9.977468","x":789,"y":554,"wires":[[],[]]},{"id":"e065142d.2e6678","type":"ui_button","z":"6c0f56b5.9a7dd8","name":"","group":"4107e475.fe4cac","order":0,"width":0,"height":0,"label":"ON","color":"","bgcolor":"","icon":"","payload":"[255]","payloadType":"json","topic":"","x":445,"y":553,"wires":[["f93b83bf.1d75b"]]},{"id":"91662a0a.ba4788","type":"ui_button","z":"6c0f56b5.9a7dd8","name":"","group":"4107e475.fe4cac","order":0,"width":0,"height":0,"label":"OFF","color":"","bgcolor":"","icon":"","payload":"[0]","payloadType":"json","topic":"","x":443,"y":518,"wires":[["f93b83bf.1d75b"]]},{"id":"df9731b1.79ef6","type":"ui_dropdown","z":"6c0f56b5.9a7dd8","name":"","label":"","place":"Select option","group":"4107e475.fe4cac","order":0,"width":0,"height":0,"passthru":true,"options":[{"label":"0","value":0,"type":"num"},{"label":"125","value":"125","type":"str"},{"label":"255","value":"255","type":"str"}],"payload":"","topic":"","x":252,"y":438,"wires":[["14a11902.1cb5b7"]]},{"id":"d27969e9.977468","type":"modbus-client","z":"","name":"","clienttype":"simpleser","bufferCommands":true,"stateLogEnabled":false,"tcpHost":"127.0.0.1","tcpPort":"502","tcpType":"DEFAULT","serialPort":"COM4","serialType":"RTU-BUFFERD","serialBaudrate":"57600","serialDatabits":"8","serialStopbits":"1","serialParity":"none","serialConnectionDelay":"100","unit_id":"1","commandDelay":"1","clientTimeout":"5000","reconnectTimeout":"5000"},{"id":"4107e475.fe4cac","type":"ui_group","z":"","name":"Default","tab":"b958d622.612448","disp":true,"width":"6"},{"id":"b958d622.612448","type":"ui_tab","z":"","name":"Home","icon":"dashboard"}]
